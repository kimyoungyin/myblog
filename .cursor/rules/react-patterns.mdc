---
description: 
globs: 
alwaysApply: false
---
# React Patterns & Functional Programming (MANDATORY)

## ‚öõÔ∏è **Component Structure (MUST FOLLOW)**

- **ALWAYS** use functional components with hooks
# React Patterns & Functional Programming (MANDATORY)

## ‚öõÔ∏è **Component Structure (MUST FOLLOW)**

- **ALWAYS** use functional components with hooks
- **NEVER** use class components
- **MUST** use `React.FC<Props>` type annotation for components
- **ALWAYS** destructure props in function parameters

```typescript
// ‚úÖ CORRECT - Functional component with proper typing
export const MarkdownEditor: React.FC<MarkdownEditorProps> = ({
    initialTitle = '',
    initialContent = '',
    action,
    ...props
}) => {
    // Component logic
};

// ‚ùå WRONG - Class component or improper typing
export class MarkdownEditor extends React.Component { ... }
```

## üéØ **State Management (CRITICAL)**

- **ALWAYS** use `useState` for local component state
- **ALWAYS** use `useCallback` for functions passed as props
- **ALWAYS** use `useMemo` for expensive calculations
- **NEVER** mutate state directly - always use setter functions

```typescript
// ‚úÖ CORRECT - Proper state management
const [title, setTitle] = useState(initialTitle);
const handleTitleChange = useCallback((value: string) => {
    setTitle(value);
}, []);

// ‚ùå WRONG - Direct mutation or missing dependencies
const handleTitleChange = (value: string) => {
    title = value; // Direct mutation
};
```

## üö´ **FORBIDDEN React Practices**

- **NEVER** use class components
- **NEVER** mutate state or props directly
- **NEVER** create functions inside render without useCallback
- **NEVER** use useEffect without proper dependency arrays
- **NEVER** use refs for imperative DOM manipulation unless absolutely necessary

## ‚úÖ **REQUIRED Functional Programming Practices**

- **ALWAYS** use pure functions when possible
- **ALWAYS** prefer `map`, `filter`, `reduce` over loops
- **ALWAYS** use immutable data patterns
- **ALWAYS** handle side effects in useEffect or event handlers only
  description:
  globs:
  alwaysApply: true

## üñ•Ô∏è **Server/Client Component Patterns (CRITICAL)**

- **ALWAYS** prefer server components by default
- **ONLY** use client components when absolutely necessary (interactivity, browser APIs, state management)
- **ALWAYS** isolate client-side logic to the smallest possible component
- **NEVER** make entire pages client components unless required

### **Server Component Best Practices**

```typescript
// ‚úÖ CORRECT - Server component with async data fetching
export default async function PostPage({ params }: PostPageProps) {
    const post = await getPostAction(postId);
    
    return (
        <div>
            <h1>{post.title}</h1>
            <MarkdownRenderer content={post.content} />
            <ToEditButton postId={postId} /> {/* Client component */}
        </div>
    );
}
```

### **Client Component Isolation**

```typescript
// ‚úÖ CORRECT - Minimal client component for interactive features only
'use client';

export default function ToEditButton({ postId }: { postId: number }) {
    const { user } = useAuthStore(); // Client-side state only
    
    if (!user?.is_admin) return null;
    
    return (
        <Button asChild>
            <Link href={`/admin/posts/${postId}/edit`}>
                <Edit className="h-4 w-4" />
                ÏàòÏ†ï
            </Link>
        </Button>
    );
}
```

### **When to Use Client Components**

- **‚úÖ USE** for interactive elements (buttons, forms, dropdowns)
- **‚úÖ USE** for browser APIs (localStorage, window, document)
- **‚úÖ USE** for state management (useState, useReducer)
- **‚úÖ USE** for event handlers (onClick, onChange)
- **‚ùå DON'T USE** for static content rendering
- **‚ùå DON'T USE** for data fetching (use server actions instead)

### **Component Composition Pattern**

```typescript
// ‚úÖ CORRECT - Server component with embedded client components
export default function PostPage() {
    return (
        <div>
            {/* Server-rendered content */}
            <PostContent post={post} />
            
            {/* Client-side interactivity only */}
            <LikeButton postId={post.id} />
            <CommentSection postId={post.id} />
        </div>
    );
}
```

---
